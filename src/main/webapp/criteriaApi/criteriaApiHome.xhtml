<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  <!-- h:headタグ -->
  <h:head>
  <title>CriteriaAPIホーム</title>
  </h:head>
  <h:body>

    <!-- jsファイルインポート -->
    <h:outputScript library="js" name="criteriaApiScript.js" target="body" />

    <h1>CriteriaAPIホーム</h1>

    <br />

    <h3>選択肢Bが選択肢Aの選択に連動するフォーム</h3>
    <p>※DBアクセスはCriteriaAPIを使用</p>
    <h:form id="linkedForm">
        <h:outputLabel for="listA" value="選択肢A：" /><br />
        <h:selectOneMenu id="listA" value="#{criteriaApiBackingBean.listAId}">
            <f:selectItems value="#{criteriaApiBackingBean.listA}"
                                    var="a"
                                    itemValue="#{a.id}"
                                    itemLabel="#{a.data}" />
            <!-- id="listBを再描画" -->
            <f:ajax event="change" listener="#{criteriaApiBackingBean.getListBByIdd}" render="listB" />
        </h:selectOneMenu><br /><br />

        <h:outputLabel for="listB" value="選択肢B：" /><br />
        <h:selectOneMenu id="listB" value="#{criteriaApiBackingBean.listBId}">
            <f:selectItems value="#{criteriaApiBackingBean.listB}"
                                    var="b"
                                    itemValue="#{b.id}"
                                    itemLabel="#{b.data}" />
        </h:selectOneMenu><br /><br />

        <h:commandButton value="追加" action="#{criteriaApiBackingBean.printSelectedId}" />
        
    </h:form>

  </h:body>
</html>